(function(){"use strict";var e={654:function(e,a,t){var o=t(5130),l=t(6768);function n(e,a,t,o,n,i){const r=(0,l.g2)("test-view");return(0,l.uX)(),(0,l.Wv)(r)}var i=t(144),r=(t(4114),t(8111),t(2489),t(4232));const u={class:"habr-input"},s=["placeholder"],c={key:0,class:"habr-input__error"};var v=(0,l.pM)({__name:"habr-input",props:(0,l.zz)({validation:{},placeholder:{}},{modelValue:{default:""},modelModifiers:{}}),emits:(0,l.zz)(["focus"],["update:modelValue"]),setup(e){const a=e,t=(0,l.fn)(e,"modelValue"),n=(0,i.KR)(!1),v=(0,l.EW)((()=>n.value&&void 0!==a.validation&&!a.validation.validation.test(t.value))),p=()=>{n.value||(n.value=!0)};return(e,a)=>((0,l.uX)(),(0,l.CE)("div",u,[(0,l.bo)((0,l.Lk)("input",{class:(0,r.C4)(["habr-input__input",{"habr-input__input_error":v.value}]),"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:e.placeholder,onFocus:a[1]||(a[1]=a=>e.$emit("focus")),onBlur:p},null,42,s),[[o.Jo,t.value]]),v.value?((0,l.uX)(),(0,l.CE)("div",c,(0,r.v_)(e.validation.validationText),1)):(0,l.Q3)("",!0)]))}}),p=t(1241);const d=(0,p.A)(v,[["__scopeId","data-v-64bb8ed8"]]);var h=d,m=(e,a=200,t=!1)=>{let o;return(...l)=>{t&&!o&&e(...l),clearTimeout(o),o=setTimeout((()=>{e(...l)}),a)}};const _={class:"loader"};function f(e,a){return(0,l.uX)(),(0,l.CE)("span",_)}const b={},g=(0,p.A)(b,[["render",f],["__scopeId","data-v-61202c30"]]);var k=g;const y=["aria-expanded"],E={class:"habr-autocomplete__container"},C={key:0,class:"habr-autocomplete__options",role:"list"},w=["onClick"],x={key:0,class:"habr-autocomplete__list-container"},K={key:0,class:"habr-autocomplete__loader",role:"status","aria-live":"polite"},O={key:1,class:"habr-autocomplete__nothing-found",role:"alert","aria-live":"polite"},R={key:2,class:"habr-autocomplete__list",id:"habr-autocomplete-list",role:"listbox"},X=["id","aria-selected","onClick"];var L=(0,l.pM)({__name:"habr-autocomplete",props:{validation:{},placeholder:{},uniqueKey:{},listingKey:{},options:{},optionsLoading:{type:Boolean},searchDebounceDelay:{default:0},nothingFoundText:{default:"Ничего не найдено"},maxCountSelectedOption:{default:1}},emits:["search"],setup(e,{emit:a}){const t=e,n=a,u=(0,i.KR)([]),s=(e,a)=>e[t.uniqueKey]??a,c=(0,i.KR)(""),v=e=>{c.value=e,p(e)},p=m((e=>n("search",e)),t.searchDebounceDelay),d=(0,i.KR)(!1),_=e=>{u.value.push(e[t.listingKey]),$.value&&(d.value=!1)},f=e=>{u.value.splice(e,1)},b=(0,i.KR)([]),g=(0,l.EW)((()=>-1===L.value?null:b.value[L.value])),L=(0,i.KR)(-1),F=()=>{L.value+1!==T.value.length&&(L.value+=1,g.value?.scrollIntoView())},j=()=>{L.value>=0&&(L.value-=1,g.value?.scrollIntoView())},I=()=>{_(T.value[L.value])},M=(0,l.EW)((()=>!T.value.length&&""!==c.value)),T=(0,l.EW)((()=>t.options.filter((e=>!u.value.includes(e[t.listingKey]))))),$=(0,l.EW)((()=>u.value.length===t.maxCountSelectedOption));return(e,a)=>{const t=(0,l.gN)("click-outside");return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",{class:"habr-autocomplete",role:"combobox","aria-expanded":d.value&&c.value,"aria-owns":"habr-autocomplete-list",onKeydown:[(0,o.jR)(F,["down"]),(0,o.jR)(j,["up"]),(0,o.jR)(I,["enter"])]},[(0,l.Lk)("div",E,[u.value.length?((0,l.uX)(),(0,l.CE)("div",C,[(0,l.RG)(e.$slots,"selected-options",{},(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.value,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"habr-autocomplete__option",role:"listitem"},[(0,l.Lk)("span",null,(0,r.v_)(e),1),(0,l.Lk)("span",{class:"habr-autocomplete__close-icon",role:"button","aria-label":"Удалить выбранную опцию",onClick:(0,o.D$)((e=>f(a)),["stop"])}," x ",8,w)])))),128))]))])):(0,l.Q3)("",!0),(0,l.bF)(h,{class:(0,r.C4)(["habr-autocomplete__input",{"habr-autocomplete__input_hidden":$.value,"habr-autocomplete__input_with-selected":u.value.length}]),"model-value":c.value,placeholder:e.placeholder,validation:e.validation,role:"textbox","aria-autocomplete":"list","aria-controls":"habr-autocomplete-list","aria-activedescendant":`habr-autocomplete-item-${L.value}`,"onUpdate:modelValue":v,onFocus:a[0]||(a[0]=e=>!$.value&&(d.value=!0))},null,8,["class","model-value","placeholder","validation","aria-activedescendant"])]),d.value?((0,l.uX)(),(0,l.CE)("div",x,[e.optionsLoading?((0,l.uX)(),(0,l.CE)("div",K,[(0,l.bF)(k)])):M.value?((0,l.uX)(),(0,l.CE)("div",O,(0,r.v_)(e.nothingFoundText),1)):T.value.length?((0,l.uX)(),(0,l.CE)("ul",R,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(T.value,((a,t)=>((0,l.uX)(),(0,l.CE)("li",{ref_for:!0,ref_key:"filteredOptionRefs",ref:b,key:s(a,t),class:(0,r.C4)(["habr-autocomplete__item",{"habr-autocomplete__item_active":L.value===t}]),role:"option",id:"habr-autocomplete-item-"+t,"aria-selected":L.value===t,onClick:(0,o.D$)((e=>_(a)),["stop"])},[(0,l.RG)(e.$slots,"item",{option:a},(()=>[(0,l.eW)((0,r.v_)(a[e.listingKey]),1)]))],10,X)))),128))])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)],40,y)),[[t,()=>d.value=!1]])}}});const F=(0,p.A)(L,[["__scopeId","data-v-811f537a"]]);var j=F;const I={class:"habr-profile-card"},M=["src"],T={class:"habr-profile-card__content"},$={class:"habr-profile-card__name"},A={class:"habr-profile-card__alias"};var V=(0,l.pM)({__name:"habr-profile-card",props:{image:{},name:{},alias:{}},setup(e){return(e,a)=>((0,l.uX)(),(0,l.CE)("div",I,[(0,l.Lk)("img",{class:"habr-profile-card__image",src:e.image,alt:"(x_x)"},null,8,M),(0,l.Lk)("div",T,[(0,l.Lk)("span",$,(0,r.v_)(e.name),1),(0,l.Lk)("span",A,(0,r.v_)(e.alias),1)])]))}});const W=(0,p.A)(V,[["__scopeId","data-v-504dbcae"]]);var D=W;const q=e=>({validation:new RegExp(`^.{${e},}$`),validationText:`Минимальное количество символов ${e}`});t(4603),t(7566),t(8721);const z=e=>fetch("https://habr.com/kek/v2/publication/suggest-mention?"+new URLSearchParams({q:e})).then((e=>e.json())).then((e=>e.data)).catch((e=>{throw new Error(e)}));t(1701);const Q=e=>e.map((e=>({...e,name:e.name||e.alias,alias:"company"===e.type?"Компания":"@"+e.alias})));var S=(0,l.pM)({__name:"habr-suggest-profiles",setup(e){const a=q(3),t=(0,i.KR)([]),o=(0,i.KR)(!1),n=async e=>{try{o.value=!0,t.value=Q(await z(e))}catch(a){t.value=[],console.error(a)}finally{o.value=!1}};return(e,r)=>((0,l.uX)(),(0,l.Wv)(j,{class:"habr-suggest",validation:(0,i.R1)(a),placeholder:"Введите логин",options:t.value,"listing-key":"alias","unique-key":"name","options-loading":o.value,"search-debounce-delay":500,"max-count-selected-option":1,onSearch:n},{item:(0,l.k6)((({option:e})=>[(0,l.bF)(D,{class:"habr-suggest__item",image:e.avatar,name:e.name,alias:e.alias},null,8,["image","name","alias"])])),_:1},8,["validation","options","options-loading"]))}});const P=(0,p.A)(S,[["__scopeId","data-v-8350a31a"]]);var U=P;const B={class:"test-view"};var G=(0,l.pM)({__name:"test-view",setup(e){return(e,a)=>((0,l.uX)(),(0,l.CE)("div",B,[a[0]||(a[0]=(0,l.Lk)("h1",null,"ЭКРАН ТЕСТОВЫЙ",-1)),(0,l.bF)(U)]))}});const J=(0,p.A)(G,[["__scopeId","data-v-56d556c3"]]);var N=J,H=(0,l.pM)({name:"App",components:{TestView:N}});const Y=(0,p.A)(H,[["render",n]]);var Z=Y;const ee={beforeMount(e,a){e.clickOutsideEvent=function(t){e===t.target||e.contains(t.target)||a.value(t)},document.addEventListener("click",e.clickOutsideEvent)},unmounted(e){document.removeEventListener("click",e.clickOutsideEvent)}};(0,o.Ef)(Z).directive("click-outside",ee).mount("#app")}},a={};function t(o){var l=a[o];if(void 0!==l)return l.exports;var n=a[o]={exports:{}};return e[o].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(a,o,l,n){if(!o){var i=1/0;for(c=0;c<e.length;c++){o=e[c][0],l=e[c][1],n=e[c][2];for(var r=!0,u=0;u<o.length;u++)(!1&n||i>=n)&&Object.keys(t.O).every((function(e){return t.O[e](o[u])}))?o.splice(u--,1):(r=!1,n<i&&(i=n));if(r){e.splice(c--,1);var s=l();void 0!==s&&(a=s)}}return a}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,l,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,o){var l,n,i=o[0],r=o[1],u=o[2],s=0;if(i.some((function(a){return 0!==e[a]}))){for(l in r)t.o(r,l)&&(t.m[l]=r[l]);if(u)var c=u(t)}for(a&&a(o);s<i.length;s++)n=i[s],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(c)},o=self["webpackChunkhabr_test"]=self["webpackChunkhabr_test"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(654)}));o=t.O(o)})();
//# sourceMappingURL=app.2e86fe8b.js.map